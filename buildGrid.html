
<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Demo &raquo; Grid from serialize &raquo; gridster.js</title>
    <link rel="stylesheet" type="text/css" href="gridster.min.css">
    <script src="jq.min.js"></script>
    <script src="gridster.min.js" type="text/javascript" charset="utf-8"></script>
    <style type="text/css">
        li{
            list-style: none;
            background: pink;
        }
        ul{
            background: green;
        }
    </style>
</head>

<body>

<h1>Build grid from serialized positions</h1>

<p>使用 serialize)()方法从以前存储的位置构建整个新网格。
    Build a entire new grid from previously stored positions obtained with  serialize method.</p>
<div class="controls">
    <button class="js-seralize">Build from serialize</button>
</div>

<div class="gridster">
    <ul>
    </ul>
</div>

<script type="text/javascript">
    var gridster;
    // same object than generated with gridster.serialize() method
    var serialization = [
        { col: 1, row: 1, size_x: 2, size_y: 2 },
        { col: 3, row: 1, size_x: 1, size_y: 2 },
        { col: 4, row: 1, size_x: 1, size_y: 1 },
        { col: 2, row: 3, size_x: 3, size_y: 1 },
        { col: 1, row: 4, size_x: 1, size_y: 1 },
        { col: 1, row: 3, size_x: 1, size_y: 1 },
        { col: 2, row: 4, size_x: 1, size_y: 1 },
        { col: 2, row: 5, size_x: 1, size_y: 1 }
    ];
    console.log('===1====serialization===',serialization)
    // sort serialization
    //sort_by_row_and_col_asc ( widgets ) 对网格坐标对象（表示每个控件的网格坐标）进行排序，首先放置左上角的空单元格。
   // serialization = Gridster.sort_by_row_and_col_asc(serialization);

    console.log('===2====serialization===',serialization)
    $(function () {

        gridster = $(".gridster ul").gridster({
            widget_base_dimensions: [100, 100],
            widget_margins: [5, 5]
        }).data('gridster');

        //清除所有widget再新建一系列widgets
        $('.js-seralize').on('click', function () {
            gridster.remove_all_widgets();
            $.each(serialization, function () {
                gridster.add_widget('<li />', this.size_x, this.size_y, this.col, this.row);
            });
        });

    });
</script>
</body>
</html>
